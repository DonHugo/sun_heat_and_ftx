# Home Assistant Dashboard for Solar Heating System v3 (Simple Version)
# This dashboard uses only built-in cards for maximum compatibility

title: Solar Heating v3
views:
  # Main Overview Tab
  - title: Overview
    path: overview
    badges: []
    cards:
      # System Status
      - type: entities
        title: System Status
        entities:
          - entity: sensor.solar_heating_v3_system_mode
            name: "System Mode"
          - entity: switch.solar_heating_v3_primary_pump
            name: "Primary Pump"
          - entity: sensor.solar_heating_v3_sensor_health_score
            name: "Sensor Health"
            unit_of_measurement: "%"
          - entity: sensor.solar_heating_v3_overheating_risk
            name: "Overheating Risk"
            unit_of_measurement: "%"

      # Key Temperatures
      - type: entities
        title: Key Temperatures
        entities:
          - entity: sensor.solar_heating_v3_solar_collector_temp
            name: "Solar Collector"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_storage_tank_temp
            name: "Storage Tank"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_return_line_temp
            name: "Return Line"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_average_temperature
            name: "Average Temperature"
            unit_of_measurement: "°C"

      # Energy Information
      - type: entities
        title: Energy Information
        entities:
          - entity: sensor.solar_heating_v3_stored_energy_kwh
            name: "Total Stored Energy"
            unit_of_measurement: "kWh"
          - entity: sensor.solar_heating_v3_stored_energy_top_kwh
            name: "Top Section Energy"
            unit_of_measurement: "kWh"
          - entity: sensor.solar_heating_v3_stored_energy_bottom_kwh
            name: "Bottom Section Energy"
            unit_of_measurement: "kWh"

      # System Performance
      - type: entities
        title: System Performance
        entities:
          - entity: sensor.solar_heating_v3_solar_collector_dt
            name: "Solar Collector ΔT"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_heat_exchanger_efficiency
            name: "Heat Exchanger Efficiency"
            unit_of_measurement: "%"
          - entity: sensor.solar_heating_v3_pump_runtime_hours
            name: "Pump Runtime"
            unit_of_measurement: "hours"
          - entity: sensor.solar_heating_v3_heating_cycles_count
            name: "Heating Cycles"

  # Water Heater Tab
  - title: Water Heater
    path: water-heater
    badges: []
    cards:
      # Water Heater Temperature Profile
      - type: entities
        title: Water Heater Temperature Profile
        entities:
          - entity: sensor.solar_heating_v3_water_heater_bottom
            name: "Bottom (0cm)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_water_heater_20cm
            name: "20cm from bottom"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_water_heater_40cm
            name: "40cm from bottom"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_water_heater_60cm
            name: "60cm from bottom"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_water_heater_80cm
            name: "80cm from bottom"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_water_heater_100cm
            name: "100cm from bottom"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_water_heater_120cm
            name: "120cm from bottom"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_water_heater_140cm
            name: "140cm from bottom (Top)"
            unit_of_measurement: "°C"

      # Water Heater Analysis
      - type: entities
        title: Water Heater Analysis
        entities:
          - entity: sensor.solar_heating_v3_water_heater_stratification
            name: "Stratification Quality"
            unit_of_measurement: "°C/cm"
          - entity: sensor.solar_heating_v3_water_heater_gradient_cm
            name: "Temperature Gradient"
            unit_of_measurement: "°C/cm"

      # RTD Sensors (Raw)
      - type: entities
        title: RTD Sensors (Raw)
        entities:
          - entity: sensor.solar_heating_v3_rtd_sensor_0
            name: "RTD Sensor 0"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_rtd_sensor_1
            name: "RTD Sensor 1"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_rtd_sensor_2
            name: "RTD Sensor 2"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_rtd_sensor_3
            name: "RTD Sensor 3"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_rtd_sensor_4
            name: "RTD Sensor 4"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_rtd_sensor_5
            name: "RTD Sensor 5"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_rtd_sensor_6
            name: "RTD Sensor 6"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_rtd_sensor_7
            name: "RTD Sensor 7"
            unit_of_measurement: "°C"

  # FTX System Tab
  - title: FTX System
    path: ftx
    badges: []
    cards:
      # FTX Temperatures
      - type: entities
        title: FTX Temperature Sensors
        entities:
          - entity: sensor.solar_heating_v3_outdoor_air_temp
            name: "Outdoor Air"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_exhaust_air_temp
            name: "Exhaust Air"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_supply_air_temp
            name: "Supply Air"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_return_air_temp
            name: "Return Air"
            unit_of_measurement: "°C"

      # Heat Exchanger Performance
      - type: entities
        title: Heat Exchanger Performance
        entities:
          - entity: sensor.solar_heating_v3_heat_exchanger_efficiency
            name: "Heat Exchanger Efficiency"
            unit_of_measurement: "%"
          - entity: sensor.solar_heating_v3_heat_exchanger_in
            name: "Heat Exchanger Input"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_heat_exchanger_out
            name: "Heat Exchanger Output"
            unit_of_measurement: "°C"

      # MegaBAS Sensors (Raw)
      - type: entities
        title: MegaBAS Sensors (Raw)
        entities:
          - entity: sensor.solar_heating_v3_megabas_sensor_1
            name: "MegaBAS Sensor 1 (Outdoor)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_megabas_sensor_2
            name: "MegaBAS Sensor 2 (Exhaust)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_megabas_sensor_3
            name: "MegaBAS Sensor 3 (Supply)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_megabas_sensor_4
            name: "MegaBAS Sensor 4 (Return)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_megabas_sensor_5
            name: "MegaBAS Sensor 5 (Ambient)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_megabas_sensor_6
            name: "MegaBAS Sensor 6 (Solar Collector)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_megabas_sensor_7
            name: "MegaBAS Sensor 7 (Storage Tank)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_megabas_sensor_8
            name: "MegaBAS Sensor 8 (Return Line)"
            unit_of_measurement: "°C"

  # Control Tab
  - title: Control
    path: control
    badges: []
    cards:
      # System Control
      - type: entities
        title: System Control
        entities:
          - entity: switch.solar_heating_v3_primary_pump
            name: "Primary Pump"
          - entity: switch.solar_heating_v3_secondary_pump
            name: "Secondary Pump"
          - entity: switch.solar_heating_v3_cartridge_heater
            name: "Cartridge Heater"
          - entity: switch.solar_heating_v3_test_switch
            name: "Test Switch"

      # System Information
      - type: entities
        title: System Information
        entities:
          - entity: sensor.solar_heating_v3_system_mode
            name: "Current Mode"
          - entity: sensor.solar_heating_v3_primary_pump
            name: "Primary Pump Status"
          - entity: sensor.solar_heating_v3_pump_runtime_hours
            name: "Pump Runtime"
            unit_of_measurement: "hours"
          - entity: sensor.solar_heating_v3_heating_cycles_count
            name: "Heating Cycles"
          - entity: sensor.solar_heating_v3_average_heating_duration
            name: "Average Heating Duration"
            unit_of_measurement: "hours"

      # Legacy Aliases (for backward compatibility)
      - type: entities
        title: Legacy Sensor Names
        entities:
          - entity: sensor.solar_heating_v3_uteluft
            name: "Uteluft (Outdoor Air)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_avluft
            name: "Avluft (Exhaust Air)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_tilluft
            name: "Tilluft (Supply Air)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_franluft
            name: "Franluft (Return Air)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_solar_collector
            name: "Solar Collector (T1)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_storage_tank
            name: "Storage Tank (T2)"
            unit_of_measurement: "°C"
          - entity: sensor.solar_heating_v3_return_line
            name: "Return Line (T3)"
            unit_of_measurement: "°C"

# Configuration Notes:
#
# This dashboard uses only built-in Home Assistant cards for maximum compatibility.
# No custom cards or HACS installations are required.
#
# MQTT Configuration Required:
# The v3 system publishes sensor data to these topics:
# - solar_heating_v3/temperature/{sensor_name}
# - solar_heating_v3/status/system
# - solar_heating_v3/control/{component}
#
# Sensor Entity Names:
# All sensors follow the pattern: sensor.solar_heating_v3_{sensor_name}
#
# Available Sensors:
# Temperature Sensors:
# - rtd_sensor_0 through rtd_sensor_7 (water heater stratification)
# - water_heater_bottom, water_heater_20cm, water_heater_40cm, etc.
# - outdoor_air_temp, exhaust_air_temp, supply_air_temp, return_air_temp
# - solar_collector_temp, storage_tank_temp, return_line_temp
# - megabas_sensor_1 through megabas_sensor_8
#
# Calculated Values:
# - stored_energy_kwh, stored_energy_top_kwh, stored_energy_bottom_kwh
# - heat_exchanger_efficiency, solar_collector_dt
# - sensor_health_score, overheating_risk
# - pump_runtime_hours, heating_cycles_count, average_heating_duration
# - water_heater_stratification, water_heater_gradient_cm
# - average_temperature
#
# System State:
# - system_mode (normal, manual, overheated, error, maintenance)
# - primary_pump (on/off)
# - manual_control (true/false)
# - overheated (true/false)
#
# Installation:
# 1. Copy this YAML to your Home Assistant configuration
# 2. Add it to your Lovelace dashboard configuration
# 3. Ensure MQTT integration is configured for the solar_heating_v3 topics
# 4. The sensors will be automatically discovered via MQTT
