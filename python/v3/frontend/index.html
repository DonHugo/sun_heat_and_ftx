<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Heating System v3 - Dashboard</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üåû Solar Heating System v3</h1>
            <div class="status-indicators">
                <div class="status-item" id="system-status">
                    <span class="status-label">System:</span>
                    <span class="status-value" id="system-mode">Loading...</span>
                </div>
                <div class="status-item" id="mqtt-status">
                    <span class="status-label">MQTT:</span>
                    <span class="status-value" id="mqtt-connection">Loading...</span>
                </div>
                <div class="status-item" id="ha-status">
                    <span class="status-label">Home Assistant:</span>
                    <span class="status-value" id="ha-connection">Loading...</span>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tab-navigation">
            <button class="tab-button active" data-tab="dashboard">Dashboard</button>
            <button class="tab-button" data-tab="temperatures">Temperatures</button>
            <button class="tab-button" data-tab="control">Control</button>
            <button class="tab-button" data-tab="diagnostics">Diagnostics</button>
        </nav>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-grid">
                <!-- System Overview -->
                <div class="card">
                    <h3>System Overview</h3>
                    <div class="system-info">
                        <div class="info-item">
                            <span class="label">Mode:</span>
                            <span class="value" id="current-mode">Auto</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Pump:</span>
                            <span class="value" id="pump-status">OFF</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Heater:</span>
                            <span class="value" id="heater-status">OFF</span>
                        </div>
                    </div>
                </div>

                <!-- Temperature Display -->
                <div class="card">
                    <h3>üå°Ô∏è Current Temperatures</h3>
                    <div class="temperature-grid">
                        <div class="temp-item">
                            <span class="temp-label">Tank:</span>
                            <span class="temp-value" id="temp-tank">--¬∞C</span>
                        </div>
                        <div class="temp-item">
                            <span class="temp-label">Collector:</span>
                            <span class="temp-value" id="temp-collector">--¬∞C</span>
                        </div>
                        <div class="temp-item">
                            <span class="temp-label">Ambient:</span>
                            <span class="temp-value" id="temp-ambient">--¬∞C</span>
                        </div>
                        <div class="temp-item">
                            <span class="temp-label">Heat Exchanger:</span>
                            <span class="temp-value" id="temp-heat-exchanger">--¬∞C</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Controls -->
                <div class="card">
                    <h3>‚ö° Quick Controls</h3>
                    <div class="control-buttons">
                        <button class="btn btn-primary" id="pump-start-btn">Start Pump</button>
                        <button class="btn btn-secondary" id="pump-stop-btn">Stop Pump</button>
                        <button class="btn btn-danger" id="emergency-stop-btn">Emergency Stop</button>
                    </div>
                </div>

                <!-- Mode Selection -->
                <div class="card">
                    <h3>üéõÔ∏è System Mode</h3>
                    <div class="mode-buttons">
                        <button class="btn btn-mode" data-mode="auto" id="mode-auto">Auto</button>
                        <button class="btn btn-mode" data-mode="manual" id="mode-manual">Manual</button>
                        <button class="btn btn-mode" data-mode="eco" id="mode-eco">Eco</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Temperatures Tab -->
        <div id="temperatures" class="tab-content">
            <div class="card">
                <h3>üå°Ô∏è Temperature Monitoring</h3>
                <div class="temperature-details">
                    <div class="temp-card">
                        <h4>Water Tank</h4>
                        <div class="temp-display" id="temp-tank-detail">--¬∞C</div>
                        <div class="temp-status" id="tank-status">Normal</div>
                    </div>
                    <div class="temp-card">
                        <h4>Solar Collector</h4>
                        <div class="temp-display" id="temp-collector-detail">--¬∞C</div>
                        <div class="temp-status" id="collector-status">Normal</div>
                    </div>
                    <div class="temp-card">
                        <h4>Ambient</h4>
                        <div class="temp-display" id="temp-ambient-detail">--¬∞C</div>
                        <div class="temp-status" id="ambient-status">Normal</div>
                    </div>
                    <div class="temp-card">
                        <h4>Heat Exchanger In</h4>
                        <div class="temp-display" id="temp-heat-exchanger-detail">--¬∞C</div>
                        <div class="temp-status" id="heat-exchanger-status">Normal</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Tab -->
        <div id="control" class="tab-content">
            <div class="card">
                <h3>üéÆ System Control</h3>
                <div class="control-section">
                    <h4>Pump Control</h4>
                    <div class="control-buttons">
                        <button class="btn btn-primary" id="control-pump-start">Start Pump</button>
                        <button class="btn btn-secondary" id="control-pump-stop">Stop Pump</button>
                    </div>
                    <div class="control-status">
                        <span class="label">Pump Status:</span>
                        <span class="value" id="control-pump-status">OFF</span>
                    </div>
                </div>
                
                <div class="control-section">
                    <h4>System Mode</h4>
                    <div class="mode-buttons">
                        <button class="btn btn-mode" data-mode="auto" id="control-mode-auto">Auto</button>
                        <button class="btn btn-mode" data-mode="manual" id="control-mode-manual">Manual</button>
                        <button class="btn btn-mode" data-mode="eco" id="control-mode-eco">Eco</button>
                    </div>
                    <div class="control-status">
                        <span class="label">Current Mode:</span>
                        <span class="value" id="control-current-mode">Auto</span>
                    </div>
                </div>
                
                <div class="control-section">
                    <h4>Emergency Controls</h4>
                    <button class="btn btn-danger" id="control-emergency-stop">Emergency Stop</button>
                    <div class="warning-text">
                        ‚ö†Ô∏è Emergency stop will turn off all systems and reset to auto mode
                    </div>
                </div>
            </div>
        </div>

        <!-- Diagnostics Tab -->
        <div id="diagnostics" class="tab-content">
            <div class="card">
                <h3>üîß System Diagnostics</h3>
                <div class="diagnostics-grid">
                    <div class="diagnostic-item">
                        <h4>MQTT Status</h4>
                        <div class="status-display" id="mqtt-status-detail">
                            <span class="status-indicator" id="mqtt-indicator">‚óè</span>
                            <span class="status-text" id="mqtt-text">Loading...</span>
                        </div>
                        <div class="last-message" id="mqtt-last-message">
                            <strong>Last Message:</strong>
                            <div class="message-details" id="mqtt-message-details">No messages</div>
                        </div>
                    </div>
                    
                    <div class="diagnostic-item">
                        <h4>Hardware Status</h4>
                        <div class="hardware-status" id="hardware-status-detail">
                            <div class="hardware-item">
                                <span class="label">RTD Boards:</span>
                                <span class="value" id="rtd-status">Unknown</span>
                            </div>
                            <div class="hardware-item">
                                <span class="label">Relays:</span>
                                <span class="value" id="relay-status">Unknown</span>
                            </div>
                            <div class="hardware-item">
                                <span class="label">Sensors:</span>
                                <span class="value" id="sensor-status">Unknown</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="diagnostic-item">
                        <h4>Service Status</h4>
                        <div class="service-status" id="service-status-detail">
                            <div class="service-item">
                                <span class="label">Solar Heating:</span>
                                <span class="value" id="solar-service-status">Unknown</span>
                            </div>
                            <div class="service-item">
                                <span class="label">MQTT:</span>
                                <span class="value" id="mqtt-service-status">Unknown</span>
                            </div>
                            <div class="service-item">
                                <span class="label">Watchdog:</span>
                                <span class="value" id="watchdog-service-status">Unknown</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="last-update">
                    <span class="label">Last Update:</span>
                    <span class="value" id="last-update">Never</span>
                </div>
                <div class="api-status">
                    <span class="label">API Status:</span>
                    <span class="value" id="api-status">Connected</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading system data...</div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast">
        <div class="toast-content">
            <span class="toast-icon">‚ÑπÔ∏è</span>
            <span class="toast-message" id="toast-message">Notification</span>
        </div>
    </div>

    <script src="static/js/dashboard.js"></script>
</body>
</html>
<!-- API endpoint reference for testing -->
<script>
    // API endpoint reference: /api/status
    console.log('API endpoint available: /api/status');
</script>
